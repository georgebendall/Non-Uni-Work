{% extends "base.html" %}
{% block content %}

<section class="hero">
  <div class="hero__card">
    <div class="badges">
      <span class="badge">Venue marketplace</span>
      <span class="badge badge--soft">Add your own venue</span>
      <span class="badge badge--outline">Another button</span>
    </div>
    <h1>Book event spaces with BookASpace.</h1>
    <p class="muted">
      Website expertly crafted by George Bendall
    </p>
  </div>

  <div class="hero__card hero__card--side">
    <h3>How it works</h3>
    <ul class="list">
      <li><strong>Search & compare</strong> with filters.</li>
      <li><strong>Check availability</strong> (mock data).</li>
      <li><strong>Book securely</strong> (not working).</li>
      <li><strong>Hosts manage listings</strong> (could be added).</li>
    </ul>
  </div>
</section>

<section class="grid grid--2">
  <aside class="card">
    <h3 class="card__title">Filters</h3>

    <form class="form" method="get" action="{{ url_for('index') }}">
      <label>
        Search
        <input type="text" name="q" value="{{ filters.q }}" placeholder="e.g. Shoreditch, loft, workshop…" />
      </label>

      <div class="row">
        <label>
          City
          <select name="city">
            <option value="all" {% if filters.city == "all" %}selected{% endif %}>All</option>
            {% for c in cities %}
              <option value="{{ c }}" {% if filters.city == c %}selected{% endif %}>{{ c }}</option>
            {% endfor %}
          </select>
        </label>

        <label>
          Type
          <select name="type">
            <option value="all" {% if filters.type == "all" %}selected{% endif %}>All</option>
            {% for t in types %}
              <option value="{{ t }}" {% if filters.type == t %}selected{% endif %}>{{ t }}</option>
            {% endfor %}
          </select>
        </label>
      </div>

      <div class="row">
        <label>
          Min capacity
          <input type="number" name="cap_min" value="{{ filters.cap_min }}" min="1" />
        </label>
        <label>
          Max capacity
          <input type="number" name="cap_max" value="{{ filters.cap_max }}" min="1" />
        </label>
      </div>

      <label>
        Max price per hour (GBP)
        <input type="number" name="price_max" value="{{ filters.price_max }}" min="10" />
      </label>

      <div class="divider"></div>

      <div>
        <div class="label">Amenities</div>
        <div class="checks">
          {% for f in features %}
            <label class="check">
              <input type="checkbox" name="feature" value="{{ f }}" {% if f in filters.required_features %}checked{% endif %} />
              <span>{{ f }}</span>
            </label>
          {% endfor %}
        </div>
      </div>

      <div class="row row--buttons">
        <button class="btn btn--primary" type="submit">Apply</button>
        <a class="btn btn--ghost" href="{{ url_for('index') }}">Reset</a>
      </div>
    </form>
  </aside>

  <section class="results">
    <div class="results__head">
      <div>
        <div class="muted small">Results</div>
        <div class="results__count">{{ venues|length }} venue{{ "" if venues|length == 1 else "s" }}</div>
      </div>
      <span class="pill">Secure booking • transparent fees</span>
    </div>

    <div class="cards">
      {% for v in venues %}
        <article class="card card--venue">
          <div class="card__media">
            <img src="{{ v.images[0] }}" alt="{{ v.name }}" loading="lazy" />
          </div>

          <div class="card__body">
            <div class="card__top">
              <div>
                <div class="card__name">{{ v.name }}</div>
                <div class="muted small">{{ v.area }}, {{ v.city }}</div>
              </div>
              <span class="badge badge--soft">{{ v.type }}</span>
            </div>

            <div class="chips">
              <span class="chip">Up to {{ v.capacity }}</span>
              <span class="chip">{{ v.price_per_hour|gbp }}/hr</span>
              <span class="chip">Min {{ v.min_hours }}h</span>
            </div>

            <p class="muted">{{ v.description }}</p>

            <div class="row row--buttons">
              <a class="btn btn--ghost" href="{{ url_for('venue_page', venue_id=v.id) }}">View</a>
              <a class="btn btn--primary" href="{{ url_for('booking_page', venue_id=v.id) }}">Book</a>
            </div>
          </div>
        </article>
      {% endfor %}
    </div>

    {% if venues|length == 0 %}
      <div class="card">
        <p class="muted">No venues match these filters. Try widening capacity/price or removing an amenity.</p>
      </div>
    {% endif %}

    <div class="trust card">
      <div class="trust__item">
        <div class="trust__title">Secure payments </div>
        <div class="muted small">Payment system not implemented</div>
      </div>
      <div class="trust__item">
        <div class="trust__title">Cancellations</div>
        <div class="muted small">Cancellation policy here</div>
      </div>
      <div class="trust__item">
        <div class="trust__title">Availability</div>
        <div class="muted small">Not implemented (sync to calendar) </div>
      </div>
    </div>
  </section>
</section>

{% endblock %}
